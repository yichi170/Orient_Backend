{"remainingRequest":"/Users/ianlee/FCS/Orient/orient_frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ianlee/FCS/Orient/orient_frontend/src/components/HintDetails.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ianlee/FCS/Orient/orient_frontend/src/components/HintDetails.vue","mtime":1618572248773},{"path":"/Users/ianlee/FCS/Orient/orient_frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ianlee/FCS/Orient/orient_frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/ianlee/FCS/Orient/orient_frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ianlee/FCS/Orient/orient_frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIHByb3BzOiB7CiAgICAgICAgaWQ6IE51bWJlciwKICAgICAgICBzdGF0dXM6IFN0cmluZywKICAgIH0sCiAgICBjb21wdXRlZDogewogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICB9LAogICAgY3JlYXRlZCgpewogICAgICAgIHRoaXMuZ3JvdXBfaWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5ncm91cDsKICAgICAgICB0aGlzLmZldGNoRGF0YSgpOwogICAgfSwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaGludDogSlNPTiwKICAgICAgICAgICAgaGludHM6IEpTT04sCiAgICAgICAgICAgIGdyb3VwOiBKU09OLAogICAgICAgICAgICBpbnB1dF90ZXh0OiAiIiwKICAgICAgICB9OwogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBhc3luYyBmZXRjaERhdGEoKSB7CiAgICAgICAgICAgIGNvbnN0IHZhbF9oaW50ID0gYXdhaXQgdGhpcy5heGlvcy5nZXQoIi9iYWNrZW5kL2hpbnQvIiArIHRoaXMuaWQgKyAiLyIpCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgdGhpcy5oaW50ID0gdmFsX2hpbnQ7CiAgICAgICAgICAgIGNvbnN0IHZhbF9oaW50cyA9IGF3YWl0IHRoaXMuYXhpb3MuZ2V0KCIvYmFja2VuZC9ncm91cHNpbmZvLyIgKyB0aGlzLmdyb3VwX2lkICsgIi8iKQogICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIHRoaXMuaGludHMgPSB2YWxfaGludHMuaGludHM7CiAgICAgICAgICAgIGNvbnN0IHZhbF9ncm91cCA9IGF3YWl0IHRoaXMuYXhpb3MuZ2V0KCIvYmFja2VuZC9ncm91cHMvIiArIHRoaXMuZ3JvdXBfaWQgKyAiLyIpCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgdGhpcy5ncm91cCA9IHZhbF9ncm91cDsKICAgICAgICB9LAoKICAgICAgICBhc3luYyBoaW50X3NldF9kb25lKGhpbnRfaWQpewogICAgICAgICAgICB0aGlzLmhpbnRzW2hpbnRfaWRdLmRvbmUgPSAieWVzIjsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coaGludF9pZCk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuaGludHNbaGludF9pZF0pOwogICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmhpbnRzKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXhpb3MucGF0Y2goIi9iYWNrZW5kL2dyb3Vwc2luZm8vIiArIHRoaXMuZ3JvdXBfaWQgKyAiLyIsIAogICAgICAgICAgICAgICAgeyJoaW50cyI6IHRoaXMuaGludHNbaGludF9pZF19KQogICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgIH0sCgogICAgICAgIGFzeW5jIGFkZF9zY29yZSgpewogICAgICAgICAgICB0aGlzLmdyb3VwWydzY29yZSddICs9IHRoaXMuaGludFsic2NvcmUiXTsKICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXhpb3MucGF0Y2goIi9iYWNrZW5kL2dyb3Vwcy8iICsgdGhpcy5ncm91cF9pZC50b1N0cmluZygpICsgIi8iLCB7InNjb3JlIjogdGhpcy5ncm91cC5zY29yZX0pCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0sCgogICAgICAgIGFzeW5jIG9wZW5faGludHMoKXsKICAgICAgICAgICAgdmFyIGNudCA9IDA7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5oaW50cy5sZW5ndGg7ICsraSkgewogICAgICAgICAgICAgICAgY250ICs9IHRoaXMuaGludHNbaV0uYXZhaWwgPT09ICJubyI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgTWF0aC5taW4oMywgY250KTsKICAgICAgICAgICAgaSA9IDA7CiAgICAgICAgICAgIHdoaWxlIChjbnQgPiAwKSB7CiAgICAgICAgICAgICAgICBpID0gKGkgKyAxKSAlIHRoaXMuaGludHMubGVuZ3RoOwoKICAgICAgICAgICAgICAgIGlmICh0aGlzLmhpbnRzW2ldLmF2YWlsID09PSAibm8iICYmIE1hdGgucmFuZG9tKCkgPiAwLjcpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmhpbnRzW2ldLmF2YWlsID0gInllcyIKICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmF4aW9zLnBhdGNoKCIvYmFja2VuZC9oaW50cy8iICsgdGhpcy5ncm91cF9pZC50b1N0cmluZygpICsgIi8iLCB7ImhpbnRzIjogdGhpcy5oaW50c30pCiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGNudCAtPSAxOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgIH0sCgogICAgICAgIGFzeW5jIGNoZWNrQW5zd2VyKGFucykgewogICAgICAgICAgICBpZiAoYW5zID09PSB0aGlzLmhpbnRbImFuc3dlciJdKSB7CiAgICAgICAgICAgICAgICAvLyBTaG93IGNlbGVicmF0aW9ucyA/PwogICAgICAgICAgICAgICAgYWxlcnQoIui8uOWFpeato+eiuu+8gSIpOwogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmhpbnRzLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaGludHNbaV0uaWQgPT09IHRoaXMuaGludC5pZCAmJiB0aGlzLmhpbnRzW2ldLmRvbmUgPT09ICJubyIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oaW50X3NldF9kb25lKGkpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzLmFkZF9zY29yZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGkpOwogICAgICAgICAgICAgICAgICAgICAgICAvL3RoaXMub3Blbl9oaW50cygpOwogICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGkpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBhbGVydCgi6Ly45YWl6Yyv6Kqk77yBIik7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgfSwKfTsK"},{"version":3,"sources":["HintDetails.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"HintDetails.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div>\n        <a> {{group_id}} </a>\n        <b-card\n        bg-variant=\"dark\"\n        text-variant=\"white\"\n        style=\"max-width: 30rem\"\n        class=\"mb-1\"\n        >\n            <b-card-img-lazy\n                :src=\"id + '.jpg'\"\n                alt=\"Image\"\n                bottom\n            ></b-card-img-lazy>\n\n            <b-card-body>\n                <b-card-title>{{ hint.name }}</b-card-title>\n                <b-card-sub-title class=\"mb-2\">{{ hint.difficulty }}</b-card-sub-title>\n                <b-card-text>{{ hint.text }}</b-card-text>\n\n                <b-input-group>\n                <b-form-input\n                    v-model=\"input_text\"\n                    placeholder=\"請輸入答案\"\n                ></b-form-input>\n\n                <template #append>\n                    <b-button @click=\"checkAnswer(input_text)\">確認</b-button>\n                </template>\n                </b-input-group>\n            </b-card-body>\n        </b-card>\n    </div>\n</template>\n\n<script>\nexport default {\n    props: {\n        id: Number,\n        status: String,\n    },\n    computed: {\n    },\n    mounted() {\n    },\n    created(){\n        this.group_id = this.$route.query.group;\n        this.fetchData();\n    },\n    data() {\n        return {\n            hint: JSON,\n            hints: JSON,\n            group: JSON,\n            input_text: \"\",\n        };\n    },\n    methods: {\n        async fetchData() {\n            const val_hint = await this.axios.get(\"/backend/hint/\" + this.id + \"/\")\n                    .then(function (response) {\n                        return response.data;\n                        }\n                    );\n            this.hint = val_hint;\n            const val_hints = await this.axios.get(\"/backend/groupsinfo/\" + this.group_id + \"/\")\n                    .then(function (response) {\n                        return response.data;\n                        }\n                    );\n            this.hints = val_hints.hints;\n            const val_group = await this.axios.get(\"/backend/groups/\" + this.group_id + \"/\")\n                    .then(function (response) {\n                        return response.data;\n                        }\n                    );\n            this.group = val_group;\n        },\n\n        async hint_set_done(hint_id){\n            this.hints[hint_id].done = \"yes\";\n            // console.log(hint_id);\n            console.log(this.hints[hint_id]);\n            console.log(this.hints);\n            \n            await this.axios.patch(\"/backend/groupsinfo/\" + this.group_id + \"/\", \n                {\"hints\": this.hints[hint_id]})\n                    .then(function (response) {\n                        return response.data;\n                    })\n        },\n\n        async add_score(){\n            this.group['score'] += this.hint[\"score\"];\n                await this.axios.patch(\"/backend/groups/\" + this.group_id.toString() + \"/\", {\"score\": this.group.score})\n                    .then(function (response) {\n                        return response.data;\n                    });\n        },\n\n        async open_hints(){\n            var cnt = 0;\n            for (var i = 0; i < this.hints.length; ++i) {\n                cnt += this.hints[i].avail === \"no\";\n            }\n            Math.min(3, cnt);\n            i = 0;\n            while (cnt > 0) {\n                i = (i + 1) % this.hints.length;\n\n                if (this.hints[i].avail === \"no\" && Math.random() > 0.7) {\n                    this.hints[i].avail = \"yes\"\n                    await this.axios.patch(\"/backend/hints/\" + this.group_id.toString() + \"/\", {\"hints\": this.hints})\n                        .then(function (response) {\n                            return response.data;\n                        });\n                    cnt -= 1;\n                }\n            }\n\n        },\n\n        async checkAnswer(ans) {\n            if (ans === this.hint[\"answer\"]) {\n                // Show celebrations ??\n                alert(\"輸入正確！\");\n                for (var i = 0; i < this.hints.length; ++i) {\n                    if (this.hints[i].id === this.hint.id && this.hints[i].done === \"no\") {\n                        this.hint_set_done(i);\n                        console.log(i);\n                        //this.add_score();\n                        //console.log(i);\n                        //this.open_hints();\n                        //console.log(i);\n                        break;\n                    }\n                }\n            } else {\n                alert(\"輸入錯誤！\");\n            }\n        },\n    },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n"]}]}